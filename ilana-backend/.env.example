# =============================================================================
# Ilana Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# For production (Render), set these in the dashboard environment settings

# =============================================================================
# DATABASE (Required for seat management)
# =============================================================================

# PostgreSQL connection string
# Format: postgresql://user:password@host:5432/database
# Render provides this automatically when you add a PostgreSQL database
DATABASE_URL=postgresql://user:password@localhost:5432/ilana

# =============================================================================
# MICROSOFT AZURE AD (Required for SSO authentication)
# =============================================================================

# Azure AD App Registration Client ID
# Get this from Azure Portal > App registrations > Your App > Application (client) ID
AZURE_CLIENT_ID=your-azure-client-id-here

# Azure AD Tenant ID (use 'common' for multi-tenant)
# For single-tenant: use your specific tenant ID
# For multi-tenant: use 'common'
AZURE_TENANT_ID=common

# Azure AD Client Secret (only needed for Admin Portal backend)
# Get this from Azure Portal > App registrations > Your App > Certificates & secrets
AZURE_CLIENT_SECRET=your-client-secret-here

# =============================================================================
# SEAT MANAGEMENT
# =============================================================================

# Enable seat enforcement on API endpoints
# When true: requires valid Azure AD token and active seat
# When false: allows access without authentication (development mode)
ENFORCE_SEATS=false

# Default number of seats for free tier
# DEFAULT_FREE_SEATS=20

# =============================================================================
# APPSOURCE WEBHOOK (for license updates from Microsoft)
# =============================================================================

# Shared secret for validating AppSource webhook signatures
# Generate a strong random string and configure in Partner Center
APPSOURCE_WEBHOOK_SECRET=your-webhook-secret-here

# =============================================================================
# EXISTING ILANA CONFIGURATION
# =============================================================================

# Azure OpenAI Configuration
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-key
AZURE_OPENAI_DEPLOYMENT=gpt-4o
ENABLE_AZURE_OPENAI=true

# Pinecone Vector Database
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_INDEX_NAME=ilana-regulatory
PINECONE_ENVIRONMENT=your-environment

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Document cache TTL (hours)
# DOCUMENT_CACHE_TTL_HOURS=4

# Maximum documents in cache
# MAX_DOCUMENT_CACHE_SIZE=100

# RAG Configuration
# RAG_ASYNC_MODE=true
# RAG_ASYNC_ALLOW_SYNC=false

# Feature Flags
# ENABLE_DOCUMENT_ANALYSIS=false
# ENABLE_TA_ON_DEMAND=true
